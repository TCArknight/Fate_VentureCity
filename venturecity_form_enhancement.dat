<?xml version="1.0" encoding="ISO-8859-1"?>

<document signature="Hero Lab Data">

  <portal
    id="prtEnhance"
    style="tblInvis">
    <table_dynamic
      component="vcEnhance"
      showtemplate="tmpShowEnh"
      choosetemplate="tmpPickEnh"
      scrollable="yes"
      alwaysupdate="yes"
      candidatepick="EnhHelper"
      candidatefield="EnhExpr"
      addpick="EnhHelper"
      headerpick="EnhHelper">
      <headertitle>
        @text = "Enhance Choice"
        </headertitle>
      <additem><![CDATA[
        @text = "Add Enhance"
        ]]>
        </additem>
      </table_dynamic>      
    </portal>
    
  <template
    id="tmpPickEnh"
    name="Enhance Pick"
    compset="Enhance"
    marginhorz="3"
    marginvert="1">

    <portal
      id="name"
      style="lblSmall">
      <label>
         <labeltext><![CDATA[
            @text = field[name].text
            ]]>
            </labeltext>
        </label>
      </portal>
      
    <position><![CDATA[
    
      ~set up our height based on our tallest portal
      height = portal[name].height

      ~if this is a "sizing" calculation, we're done
      doneif (issizing <> 0)

      ~position our tallest portal at the top
      portal[name].top = 0
      
      ~position the name on the left and let it use all available space
      portal[name].width = width
        
      ]]></position>
    </template>
    
  <template
    id="tmpShowEnh"
    name="Enhance Show"
    compset="Enhance"
    marginhorz="3"
    marginvert="1">

    <portal
      id="name"
      style="lblSmall">
      <label>
        <labeltext><![CDATA[
          @text = field[name].text
          ]]></labeltext>
        </label>
      </portal>
      
     <portal
      id="enhEdit"
      style="actEdit"
      tiptext="Edit Enhances">
      <action
        action="edit"
        buttontext="">
        </action>
      </portal>
          
    <portal
      id="info"
      style="actInfo">
      <action
        action="info">
        </action>
      <mouseinfo/>
      </portal>
      
    <portal
      id="delete"
      style="actDelete"
      tiptext="Click to delete this item">
      <action
        action="delete">
        </action>
      </portal>

    <position><![CDATA[
    
      ~set up our height based on our tallest portal
      height = portal[enhEdit].height

      ~if this is a "sizing" calculation, we're done
      doneif (issizing <> 0)

      ~position our tallest portal at the top
      portal[name].top = 0
      portal[name].left = 0
      
      ~center the other portals vertically
      perform portal[enhEdit].centervert
      perform portal[info].centervert
      perform portal[delete].centervert

      ~position the delete portal on the far right
      perform portal[delete].alignedge[right,0]
      
      ~position the info portal to the left of the delete button
      perform portal[info].alignrel[rtol,delete,-5]
      
      ~position the edit portal to the left of the delete
      portal[enhEdit].visible = 1
      perform portal[enhEdit].alignrel[rtol,info,-5]
        
      var remWidth as number
      remWidth = portal[enhEdit].left - 5
      
      ~position the name on the left and let it use all available space
      portal[name].left = 0
      ~portal[name].width = remWidth/2
      portal[name].width = minimum(portal[name].width,portal[enhEdit].left - 5)
        
      ~if the ability is auto-added, change its font to indicate that fact
      if (candelete = 0) then
        perform portal[name].setstyle[lblAuto]
        endif
        
      ~shrink the name to fit the available space if it's too big, then re-center
      perform portal[name].sizetofit[6]
      perform portal[name].centervert
        
      ]]></position>
    </template>

  <layout
    id="layEnhance"
    marginvert="4">
    <portalref portal="prtEnhance" taborder="10"/>

    <position><![CDATA[

      ~position and size the table to span the full layout
      ~portal[prtEnhance].left = 0
      ~portal[prtEnhance].width = width
      
      ~position and size the table to span the full layout; it will only use the
      ~vertical space that it actually needs
      perform portal[prtEnhance].autoplace

      ]]></position>
    </layout>

  <form
	id="frmEnhance"
	name="Enhances"
	marginhorz="10"
	marginvert="5">
	<layoutref layout="layEnhance"/>
	<position><![CDATA[
	  layout[layEnhance].width = 500
	  perform layout[layEnhance].render
	  width = layout[layEnhance].width
	  height = 200
	  ]]></position>
	</form>

  </document>
